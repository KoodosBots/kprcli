<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Form Filler Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-section { margin: 30px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .required { color: red; }
        .test-controls { position: fixed; top: 10px; right: 10px; background: #f8f9fa; padding: 15px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <h1>AI Form Filler Test Page</h1>
    
    <div class="test-controls">
        <h3>Test Controls</h3>
        <button onclick="testFormDetection()">Detect Forms</button>
        <button onclick="testProfileFilling()">Fill with Profile</button>
        <button onclick="clearForms()">Clear Forms</button>
        <div id="results" style="margin-top: 10px; font-size: 12px;"></div>
    </div>

    <!-- Registration Form -->
    <div class="form-section">
        <h2>Registration Form</h2>
        <form id="registration-form" action="/register" method="POST">
            <div class="form-group">
                <label for="firstName">First Name <span class="required">*</span></label>
                <input type="text" id="firstName" name="firstName" required>
            </div>
            <div class="form-group">
                <label for="lastName">Last Name <span class="required">*</span></label>
                <input type="text" id="lastName" name="lastName" required>
            </div>
            <div class="form-group">
                <label for="email">Email Address <span class="required">*</span></label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone">
            </div>
            <div class="form-group">
                <label for="dateOfBirth">Date of Birth</label>
                <input type="date" id="dateOfBirth" name="dateOfBirth">
            </div>
            <button type="submit">Register</button>
        </form>
    </div>

    <!-- Contact Form -->
    <div class="form-section">
        <h2>Contact Form</h2>
        <form id="contact-form" action="/contact" method="POST">
            <div class="form-group">
                <label for="contactName">Full Name <span class="required">*</span></label>
                <input type="text" id="contactName" name="fullName" required>
            </div>
            <div class="form-group">
                <label for="contactEmail">Email <span class="required">*</span></label>
                <input type="email" id="contactEmail" name="email" required>
            </div>
            <div class="form-group">
                <label for="subject">Subject</label>
                <input type="text" id="subject" name="subject">
            </div>
            <div class="form-group">
                <label for="message">Message <span class="required">*</span></label>
                <textarea id="message" name="message" rows="5" required></textarea>
            </div>
            <button type="submit">Send Message</button>
        </form>
    </div>

    <!-- Address Form -->
    <div class="form-section">
        <h2>Shipping Address</h2>
        <form id="address-form" action="/shipping" method="POST">
            <div class="form-group">
                <label for="street">Street Address</label>
                <input type="text" id="street" name="address" placeholder="123 Main St">
            </div>
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city">
            </div>
            <div class="form-group">
                <label for="state">State/Province</label>
                <select id="state" name="state">
                    <option value="">Select State</option>
                    <option value="CA">California</option>
                    <option value="NY">New York</option>
                    <option value="TX">Texas</option>
                </select>
            </div>
            <div class="form-group">
                <label for="zipCode">ZIP/Postal Code</label>
                <input type="text" id="zipCode" name="zipCode">
            </div>
            <div class="form-group">
                <label for="country">Country</label>
                <select id="country" name="country">
                    <option value="US">United States</option>
                    <option value="CA">Canada</option>
                    <option value="UK">United Kingdom</option>
                </select>
            </div>
            <button type="submit">Save Address</button>
        </form>
    </div>

    <script>
        // Sample profile data for testing
        const testProfile = {
            id: 'test-profile-123',
            userId: 'user-123',
            name: 'Test Profile',
            personalData: {
                firstName: 'John',
                lastName: 'Doe',
                email: 'john.doe@example.com',
                phone: '+1-555-123-4567',
                address: {
                    street: '123 Main Street',
                    city: 'Anytown',
                    state: 'CA',
                    zipCode: '12345',
                    country: 'US'
                },
                dateOfBirth: new Date('1990-01-15'),
                customFields: {
                    company: 'Acme Corp'
                }
            },
            preferences: {},
            createdAt: new Date(),
            updatedAt: new Date()
        };

        function testFormDetection() {
            console.log('Testing form detection...');
            
            // This would use your FormDetector class
            // For now, just show what forms are detected
            const forms = document.querySelectorAll('form');
            const results = document.getElementById('results');
            
            results.innerHTML = `
                <strong>Detected ${forms.length} forms:</strong><br>
                ${Array.from(forms).map((form, i) => 
                    `Form ${i + 1}: ${form.id || 'unnamed'} (${form.querySelectorAll('input, select, textarea').length} fields)`
                ).join('<br>')}
            `;
            
            console.log('Forms detected:', forms);
        }

        function testProfileFilling() {
            console.log('Testing profile-based form filling...');
            
            // Fill first name fields
            const firstNameFields = document.querySelectorAll('input[name="firstName"], input[id="firstName"]');
            firstNameFields.forEach(field => field.value = testProfile.personalData.firstName);
            
            // Fill last name fields
            const lastNameFields = document.querySelectorAll('input[name="lastName"], input[id="lastName"]');
            lastNameFields.forEach(field => field.value = testProfile.personalData.lastName);
            
            // Fill email fields
            const emailFields = document.querySelectorAll('input[type="email"]');
            emailFields.forEach(field => field.value = testProfile.personalData.email);
            
            // Fill phone fields
            const phoneFields = document.querySelectorAll('input[type="tel"], input[name="phone"]');
            phoneFields.forEach(field => field.value = testProfile.personalData.phone);
            
            // Fill full name fields
            const fullNameFields = document.querySelectorAll('input[name="fullName"]');
            fullNameFields.forEach(field => 
                field.value = `${testProfile.personalData.firstName} ${testProfile.personalData.lastName}`
            );
            
            // Fill address fields
            const addressFields = document.querySelectorAll('input[name="address"], input[id="street"]');
            addressFields.forEach(field => field.value = testProfile.personalData.address.street);
            
            const cityFields = document.querySelectorAll('input[name="city"], input[id="city"]');
            cityFields.forEach(field => field.value = testProfile.personalData.address.city);
            
            const stateFields = document.querySelectorAll('select[name="state"], select[id="state"]');
            stateFields.forEach(field => field.value = testProfile.personalData.address.state);
            
            const zipFields = document.querySelectorAll('input[name="zipCode"], input[id="zipCode"]');
            zipFields.forEach(field => field.value = testProfile.personalData.address.zipCode);
            
            const countryFields = document.querySelectorAll('select[name="country"], select[id="country"]');
            countryFields.forEach(field => field.value = testProfile.personalData.address.country);
            
            // Fill date of birth
            const dobFields = document.querySelectorAll('input[type="date"], input[name="dateOfBirth"]');
            dobFields.forEach(field => field.value = '1990-01-15');
            
            const results = document.getElementById('results');
            results.innerHTML = '<strong>Forms filled with test profile data!</strong>';
            
            console.log('Profile filling completed');
        }

        function clearForms() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => form.reset());
            
            const results = document.getElementById('results');
            results.innerHTML = '<strong>All forms cleared!</strong>';
            
            console.log('Forms cleared');
        }

        // Prevent actual form submission for testing
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                alert(`Form "${form.id}" would be submitted with current data`);
            });
        });

        console.log('Test page loaded. Use the buttons in the top-right to test functionality.');
        console.log('Open browser dev tools to see detailed logs.');
    </script>
</body>
</html>